		Tasks
**********************************************
04.10.15 DS changes:
	- COMMON: 6 (already announced)
	- Deskside: 
**********************************************

1_new printing setup...
	- lpadmin notes:
		>Cups printing to Windows/Samba queues retains the credentials of the first logged in user 
		>if you don't use any "-o auth-info-required" flag in your lpadmin command, until reboot.
		>we solved the problem using "-o auth-info-required=negotiate", but couldn't find another way 
		>of clearing the previously cached credentials.

1.5_user idle logout timer
	* use profile to set /Library/Preferences/.GlobalPreferences.plist	
		=> key:  com.apple.autologout.AutoLogOutDelay
		=> value: time, in seconds (60 min = 3600)
		=> use "Forced" for profile setting
	* test
		- tests good
		- profile located at macdev2/Robert Junk/mcxToProfile/userIdleLogoutSetting.mobileconfig

2_new Deskside Yosemite image (10.10.3)
	- update app installs
		- in build area
			- iMovie 10.0.8
			- Firefox 37.0.2
			- Keynote/Page/Numbers _.5.3
			* remove iPhoto
			* Xcode 6.3 + CLtools
			* clam 2.7.5
			* fetch 5.7.5 
			* chrome 42.x
			* flashplayer
			* skype 7.6
			* vidyo
			* vlc 2.2
			* check zInstallers dir
			* clamavinstallerengine
			* shockwave installer
			* anyconnect vpn
			* java 8_45
			* ms office 14.4.9 (and remove other office updates back until 14.1.0)	
			* acrobat reader dc		
			* photos app built in to vanilla? YES
		* in deskside files area (for post-install only workflow)
		=> push to nms6, other servers
	- test on all our hardware

2.5_Run fsck_hfs at the end of Yosemite installs with recovery partition

3_DS1.6.13
	- netboot sets that will have to be rebuilt:
		- 10.7 deskside

4_Server work
	- new nms1/6 setup on KVM
	- request server moves for nms8/9 (poly and ?)

5_/Library/StartupItems/refreshASUuser
	- overhaul to match logoutScriptLoader-refreshASUuser.sh behavior (functions for ungraceful logout)

6_Camtasia
	- update logoutScriptLoader-refreshASUuser.sh => push out

7_Dev,Deskside, and more software automation
	- add server manifest
		- keep software up-to-date on which servers?
	- munkireport and FV2?
		- OR something like https://github.com/grahamgilbert/Crypt
		- OR https://derflounder.wordpress.com/2013/04/29/filevault-setup-app-local-filevault-2-encryption-setup-and-enforcement/
		- test key escrow
			=> doesn't auto-upload key info to munkireport, just on/off
			* make/implement key escrow? => Casper do this stuff, unless axed

	- general-setupMunki.sh, commonImageConfigure.sh, commonImageConfigure-copyMunki.sh can go into production
		=> general-setupMunki.sh can be included in Common workflows
		=> don't push desksideImageConfigure.sh or desksideImageConfigure-copyMunki.sh
			- there's not a good check against use outside of dev
			- for that reason DON'T make deskside workflows call munki scripts outside of Weasel Test workflow(s)
		=> add exception for imagebuilder under cpcom358 heading

8_What to do with Xserves?
	- server setup automation
		- what to use?
			- script, Chef, Puppet, etc.?
			- how about Munki? run-once?
	- replace old xserve backup server?
	- use for Casper setup?
	- hotswap?
	- macnms 8/9
	- tech studio?
		- what hardware?
		- how to isolate network interfaces
		- needs
		- separate tech studio DS group
		- separate tech studio workflow(s)
	- 2nd server for Poly?
		- mod to Netboot Helper
			- Poly 1, Poly 2
			- Tempe 1, Tempe 2
			- $campus 2, other than COMMON selection go to $campus Deskside server
		- can two multicasts sessions coexist on Poly's flat network?
		- (2) more OS X Server licenses?
		- replace boot drives with SSDs
		- add 3rd drive (1TB spinning platter, full backup of data drive + boot drive backup)
		- stagger DS syncing times


9_Bootpicker and Yosemite
	- alternatives?
		- BootRunner?
			- cost: $3500 OR $7000 that includes 2 yrs upgrades/maintenance
			- components:
				- package installer from vendor
				- file locations
					- /Library/Preferences/com.twocanoes.bootrunner.plist
					- desktop background
					- /Library/LaunchAgents/com.twocanoes.bootrunner.plist
					- /Library/PreferencePanes/"Boot Runner".prefpane
			* test with parallels windows vm (supposedly can launch)
				=> can launch
					- uses specific OSX user
					- opens ^ user env
					- have to build in hooks to auto-logout when closed
					- can force quit in certain situations...so launchagent to do ^?

10_Yosemite COMMON image
	- check login/logout hooks + our other config junk
	- specific items...
		- setup assistant (/var/db/.AppleSetupDone) is still not being written/kept & skip the icloud setup/diagnostics screens
			=> update scripts with rtrouton's script
				osvers=$(sw_vers -productVersion | awk -F. '{print $2}')
				sw_vers=$(sw_vers -productVersion)
				sw_build=$(sw_vers -buildVersion)
				/usr/bin/defaults write "${USER_HOME}"/Library/Preferences/com.apple.SetupAssistant DidSeeCloudSetup -bool TRUE
    				/usr/bin/defaults write "${USER_HOME}"/Library/Preferences/com.apple.SetupAssistant GestureMovieSeen none
    				/usr/bin/defaults write "${USER_HOME}"/Library/Preferences/com.apple.SetupAssistant LastSeenCloudProductVersion "${sw_vers}"
    				/usr/bin/defaults write "${USER_HOME}"/Library/Preferences/com.apple.SetupAssistant LastSeenBuddyBuildVersion "${sw_build}"
			=> added to zz-commonImageBuilder-postActions.sh
			-test
		- Chess asks about 1.2GB download for speech
			=> added to Home Directories in Build area
		* update to Lockdown Browser
		- dockfixup.plist is in /System/Library/CoreServices/Dock.app/Contents/Resources
			=> added to zz-commonImageBuilder-postActions.sh
		- Maps barks about privacy setting using your location => every time it's opened
		- Sketchup license (and stuff from jan15 fixme)
			=> sketchup2015.pkg added to image build area
		- com.apple.notificationcenterui.agent is loaded in launchctl
		- can we reset cfprefsd at logout? benefit?
			- what about migrating prefs to a) profile b) defaults c) combination?
		- /var/folders supposedly fixed in yosemite, but if needed:
			 find /var/folders -name "*.iscachebmp" -type f -exec rm -v "{}" \; 
		- new CC2014 build => test
			- Acrobat/Reader EULA & popups
				=> added to Home Directories in Build area
			- After Effects migrate settings popup
				=> added to Home Directories in Build area
			* remove Digital Editions 4.0
			- illustrator what's new screen
				=> added to Home Directories in Build area
		- java se6 install prompt from flash builder, Maple, SPSS
			=> stackoverflow.com/questions/19563766/eclipse-kepler-for-os-x-mavericks-request-java-se-6
				- but still doesn't quite function
		* Audacity prompt for plugin installs
		- "What's New in OSX Yosemite popup" => implement the notification center thing to turn of stuff?
		- config profile(s) for docks
		* need MATLAB 2015a
			* need FIK for install
		- Numbers/Pages "What's New" splash screens
			=> added to Home Directories in Build area
		- Photos app "preparing library"
			=> added to Home Directories in Build area
		- VLC check for album art popup
			=> added to Home Directories in Build area
		* Xcode install additional required components
		- check System Preferences > Extensions
		- wireless setup is working, but Profile is not being installed...? 
			=> .profileSetupDone gets written but profile not installed
		- What preferences can be set via Profiles?
			=> https://github.com/timsutton/mcxToProfile/blob/master/mcxToProfile.py
				http://www.amsys.co.uk/2015/blog/creating-config-profiles-instead-first-boot-script/#.VTbPR2akUkU
		- Defaults write examples here: https://github.com/mathiasbynens/dotfiles/blob/master/.osx
		- echo360
		- SPSS 23
			=> added to image build area
		* minitab express
			*=> license server = "@pubkeyserver.asu.edu"
		* change out bootpicker lines in scripts in favor of bootrunner config
		- for bootrunner v2.0, do copy of individual components, not just single package install
		* CHECK /Library/StartupItems -> fully deprecated, no longer functions
			=> see http://paulbeachsblog.blogspot.com/2015/02/yosemite-superserver-and-startupitems.html for syntax for launchd replacement
			* means setComputerName, refreshASUuser, & keyAccess are not functioning
			*=> modify launchd-refreshASUuser.sh
			*=> modify launchd-setComputerNames.sh for BootRunner (instead of BootPicker items)
			*=> modify commonImageDepartmentConfigure-sda.sh for BootRunner (instead of BootPicker)
		- need new k2 client
		- StartupItems "checkForDSFullMontyStatus needs to be transitioned to launchd
		
11_ELK stack on OSX (macmgmt.inre.asu.edu)
	* feed DS logs
		-https://github.com/driskell/log-courier
		- OR launchdaemon that calls a simple script that does the work?
			- need agent that runs on servers to check for new files;
			- at specified time, upload to macmgmt
				- add maclogs user to macmgmt, access DSLogs folder
				- after logs are duplicated on macmgmt, move to "uploaded" folder on local server
				- how about at 11p every night
	* queries?
		=> what about feeding our custom-made logs (flags) into ELK?
			* initial test feeding logstash this file ( macnms7-aecp-ecanx-111-e01-D25KJ1U4DNMP-1211 ) with logstashTestConfig.conf
			* modify logImaging.sh script to do csv of values
				=> need the date command to do this:  `date -u +"%Y-%m-%d%H:%M:%SZ"
				=> need to strip special characters from workflow names
				* use "," instead of "-"
			- convert old logs to new format
				=> oldLogDataTransform.sh
				* modify logging in logImaging.sh
***				- push new logImaging.sh to production
			* develop filter for syntax (use csv, example at: http://blog.trifork.com/2014/01/28/using-logstash-elasticsearch-and-kibana-to-monitor-your-video-card-a-tutorial/ )
			* ? need agent on macmgmt to import new stuff into ELK, or does ELK auto-update/import => ELK -can- autoimport if running

12_rootpipe

13_Test Yosemite LDAP/Kerberos for Deskside

14_Google's Mac admin tools
	- https://github.com/google/macops